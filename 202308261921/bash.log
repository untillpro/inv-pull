2023/08/26 19:21.755 Set up traps...
ssh-agent started  and private key present.
2023/08/26 19:21.760 Environment:
  env_LOGNAME=root
  env_RESULTS_FOLDER=/root/tmp/inv-pull
  env_NUMLOGINS=1
  env_QP=1
  env_CP=1
  env_DC=dc1
  env_DURATION=2m
  env_OPERDAY=2000
  env_SOURCES_FOLDER=/root/sources
  env_BP3_COMMIT=43399a77d3c78f0b4e15ec5c5a252cdb8178e167
  env_BP3_REPO=https://github.com/untillpro/airs-bp3
  env_ABOMBER_COMMIT=5a9154bd98ab160f5c87e988fd2572d50ca4766c
  env_ABOMBER_REPO=https://github.com/maxim-ge/air-devops
  const_RESULT_FOLDER=/root/tmp/inv-pull/202308261921
  parent_of_RESULT_FOLDER=/root/tmp/inv-pull
  const_ERROR_FILE=/root/tmp/inv-pull/202308261921/error.txt
  const_STDOUT_FILE=/root/tmp/inv-pull/202308261921/bash.log
  const_SCYLLA_NODES=DBNode1,DBNode2,DBNode3
  const_BP_NODE=AppNode
  const_BP3_EXEC_IMAGE_NAME=airs-bp
  const_BP3_LOG=airs-bp_log.txt
  const_ABOMBER_EXEC_IMAGE=abomber
2023/08/26 19:21.792 Recreate keyspaces for Air...
Wait for Scylla to start on DBNode1...
3
Scylla cluster ready
Create keyspaces...
Welcome to Ubuntu 22.04.2 LTS (GNU/Linux 5.15.0-70-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Sat Aug 26 07:21:06 PM UTC 2023

  System load:              0.7724609375
  Usage of /:               55.1% of 149.92GB
  Memory usage:             93%
  Swap usage:               0%
  Processes:                157
  Users logged in:          0
  IPv4 address for docker0: 172.17.0.1
  IPv4 address for enp7s0:  10.0.0.2
  IPv4 address for eth0:    49.13.16.214
  IPv6 address for eth0:    2a01:4f8:c012:4d0c::1

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

60 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

Enable ESM Apps to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status


*** System restart required ***
2023/08/26 19:21.473 Drop scylla snapshots to clear not used disk space...
Clearing snapshots on Node: DBNode1
Requested clearing snapshot(s) for [all keyspaces]
Clearing snapshots on Node: DBNode2
Requested clearing snapshot(s) for [all keyspaces]
Clearing snapshots on Node: DBNode3
Requested clearing snapshot(s) for [all keyspaces]
2023/08/26 19:21.381 Drop airc-backoffice2 container...
bo-alpha
bo-alpha
bo-alpha
Container bo-alpha removed remotely.
2023/08/26 19:21.146 Update airc-backoffice2 image...
alpha: Pulling from untillpro/airc-backoffice2
Digest: sha256:b41015997f9003b2675c70ae597873c502b2fe416147b412e82cd8cb5aec9d13
Status: Image is up to date for untillpro/airc-backoffice2:alpha
docker.io/untillpro/airc-backoffice2:alpha
2023/08/26 19:21.389 Deploy airc-backoffice2 image...
9bc16a615d3b55a97901de3665fdcf080440dbab4fbfd6011f11b02913f52639
2023/08/26 19:21.104 Drop airs-bp container...
airs-bp
airs-bp
airs-bp
Container airs-bp removed remotely.
2023/08/26 19:21.113 pkill airs-bp process...
2023/08/26 19:21.392 Copy secrets...
2023/08/26 19:21.675 Prepare and run airs-bp executable...
2023/08/26 19:21.680 Build airs-bp from sources, commit=43399a77d3c78f0b4e15ec5c5a252cdb8178e167...
REPO_CLONE_FOLDER=/root/sources/github.com/untillpro
The folder /root/sources/github.com/untillpro does not exist. Creating...
Repository https://github.com/untillpro/airs-bp3 not cloned. Cloning now...
Cloning into 'airs-bp3'...
HEAD is now at c2c87ccf update voedger dependency
Checking out commit 43399a77d3c78f0b4e15ec5c5a252cdb8178e167...
HEAD is now at 43399a77 update voedger dependency
The executable airs-bp has been created in /root/sources
2023/08/26 19:21.289 Upload airs-bp executable image to AppNode...
2023/08/26 19:21.894 Run airs-bp...
2023/08/26 19:21.162 airs-bp started, wait for airs-bp initialization..
2023/08/26 19:21.184 Still wait for Air initialization..
2023/08/26 19:21.209 Still wait for Air initialization..
2023/08/26 19:22.234 Still wait for Air initialization..
2023/08/26 19:22.261 Air initialization success
2023/08/26 19:22.264 Air service is up!
2023/08/26 19:22.269 Get secretKeyJWT from AppNode service...
2023/08/26 19:22.579 Secret key installed with success.
2023/08/26 19:22.582 Drop abomber container...
Container abomber not found locally.
2023/08/26 19:22.678 pkill abomber executable...
2023/08/26 19:22.691 Build abomber from sources, commit=5a9154bd98ab160f5c87e988fd2572d50ca4766c...
REPO_CLONE_FOLDER=/root/sources/github.com/maxim-ge
HEAD is now at 5a9154b Update perftest-runner.sh
From https://github.com/maxim-ge/air-devops
   7832dfb..5f8711d  654708-perftest-sh-params-WORKING_FOLDER-ABOMBER_R -> origin/654708-perftest-sh-params-WORKING_FOLDER-ABOMBER_R
Checking out commit 5a9154bd98ab160f5c87e988fd2572d50ca4766c...
HEAD is now at 5a9154b Update perftest-runner.sh
The executable abomber has been created in /root/sources
2023/08/26 19:22.651 Prepare result folders in /root/tmp/inv-pull/202308261921...
2023/08/26 19:22.658 Save airs-bp version...
2023/08/26 19:22.941 Save scylla.yaml...
2023/08/26 19:22.600 Iterate over Scylla nodes and store dc configs...
2023/08/26 19:22.056 abomber init, using executable...
2023/08/26 19:22.140 Fork wait_and_get_profiles...
2023/08/26 19:22.146 abomber sales, using executable...
2023/08/26 19:22.146 Sleep 1m...
2023/08/26 19:23.155 Get debug info.
2023/08/26 19:23.336 profile
2023/08/26 19:24.268 Save and process profiles...
2023/08/26 19:24.460 Performance test is done
2023/08/26 19:24.464 Ref. git.log for details about commit and push
